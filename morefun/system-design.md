## System Design Concepts

---
### 1-Background

### 2-Networking

### 3-APIs

#### 客户端-服务器（Client-Server）Model

- **客户端**：在客户端-服务器模型中，客户端是指访问服务器提供的服务的应用程序或系统。它可以是从网页浏览器到电子邮件软件再到移动应用程序等各种形式，它通过发送请求获取特定信息或服务来发起通信。
- **服务器**：服务器是一台计算机、设备或软件，向网络上的客户端或其他服务器提供资源、数据、服务或功能。它等待来自客户端的请求，并通过满足这些请求来响应，例如提供网页、处理电子邮件或提供数据库访问。
- **可互换的角色**：客户端和服务器的角色可以根据上下文互换。一台计算机可以同时充当客户端和服务器的角色，例如当网站从第三方请求数据时。点对点（P2P）网络也展示了这种角色的可互换性。
- **主叫和被叫**：客户端通常被称为“主叫方”，因为它发起请求，而服务器则被视为“被叫方”，它提供服务或处理请求。

了解客户端-服务器模型在网络和系统设计中至关重要，因为它构成了跨网络进行通信和资源共享的基础。

#### RPCs (Remote Procedure Call)

远程过程调用（RPC）是一种允许程序在不同机器上执行函数的技术，为分布式系统中的任务管理提供了简单高效的解决方案，使得程序能够跨多台计算机进行操作。在客户端-服务器模型中，客户端和服务器通过网络保持连接。

举个实际场景来说：假设我们在YouTube的搜索栏中输入“机器学习”，然后浏览器显示了所有有关机器学习的视频的列表。负责这个列表操作的代码并不驻留在我们的浏览器中。这是因为浏览器并不是视频存储的地方；相反，这段代码位于YouTube的服务器上。这个操作可能会使用一个名为listVideos('机器学习')的函数。即使看起来代码是在客户端执行，实际上它在后台是在调用YouTube的服务器来检索相关信息。

#### HTTP（超文本传输协议）

建立在IP和TCP之上的协议。作为开发人员，我们对此有一定的控制权。回想一下，基本上，IP负责将数据包从源传输到目的地，但不关心数据包到达的顺序。而TCP是建立在IP之上的，它确保数据包按照正确的顺序传递。HTTP则位于TCP之上。它是一种请求request/响应response协议。它是一组关于数据应该如何格式化和在网络上传输的规则，以及服务器和浏览器应该如何响应不同命令的协议。每次通过浏览器发起调用时，都会使用HTTP。

通过浏览器开发者工具可以很好的理解HTTP。在网页浏览器中输入网页地址，然后进入开发者工具，打开网络标签页会显示关键的细节，如请求的名称、状态码、请求类型、响应的大小以及完成请求所需的时间。

HTTP请求的解剖：

- **请求方法**：指示对提供的资源执行的期望操作。例如，我们可以使用GET（检索资源）、POST（提交要由资源处理的数据）、PUT（更新）和DELETE（删除）等方法。
- **请求URL/URI**：指定请求应该发送到哪里的URL。如所见，它还包含路径/results，并使用?search_query=something指定参数。这反映了我们在搜索框中输入的内容。
- **头部Headers**：头部提供了关于请求的附加信息。这些可以是响应头部或请求头部。
   - HTTP请求头部：提供了有关请求的必要信息，指示方法、方案，但可能最重要的是客户端可以接受的数据类型。如下图所示，我们的浏览器接受text/HTML。
   - HTTP响应头部：提供了关于响应或服务器的附加信息。它们还设置了cookie（Set-Cookie），指定了缓存行为（Cache-Control）和内容类型（Content-Type）。
- **主体Body**：并非每个HTTP请求都包含主体。例如，GET请求没有主体，因为我们没有发送任何数据；相反，我们是在检索数据。对于像POST或PUT这样的请求，主体包含我们想要发送到服务器的数据（有效负载）。

HTTP状态码是服务器通知客户端其请求状态的一种方式。状态码分为几个类别，帮助开发人员了解其请求的状态。以下是网络层次：

- 信息响应（100 - 199）：用于确认已接收到客户端的请求并正在处理。
  - 100 Continue：表示到目前为止一切正常，客户端应继续请求，或者如果请求已经完成，则忽略它。
  - 101 Switching Protocols：表示服务器正在切换到客户端从升级请求头中接收到的不同协议。

- 成功响应（200 - 299）：200级别的任何代码都表示成功响应。
  - 200 OK：表示请求已成功。这表示请求已被处理，并且服务器正在返回请求的数据。
  - 201 Created：表示请求已成功，创建了一个新资源。通常在POST或PUT请求后发送，确认资源已成功创建或更新。

- 重定向消息（300 - 399）：当请求的资源已被分配新的永久URL或在不同的URL上临时可用时使用。
  - 300 Multiple Choices：表示请求具有多个可能的响应。客户端应选择其中一个。
  - 301 Moved Permanently：表示请求的资源已永久移动到新位置，服务器正在将客户端重定向到此新位置。

- 客户端错误响应（400 - 499）：当服务器遇到无效或无法理解的客户端请求时使用。
  - 400 Bad Request：表示服务器遇到无效或无法理解的客户端请求。通常在请求中传递了不正确的参数时出现，导致了坏请求。
  - 401 Unauthorized：当客户端尝试未经适当身份验证或授权即访问受保护的资源时返回。例如，如果尝试删除您没有权限删除的视频，则服务器将以401 Unauthorized状态码响应。

- 服务器错误响应（500 - 599）：500-599范围内的服务器错误响应表示服务器在处理客户端请求时发生了错误。这些响应代码通常指示服务器内部出现了问题或失败，无法满足请求。

#### SSL/TLS与HTTPS

- SSL/TLS：SSL（安全套接层）和TLS（传输层安全Transport Layer Security）是用于在网络上进行安全通信的协议。TLS通过加密数据来确保通信的安全性。虽然我们只是在高层次上讨论它，因为对系统设计来说并不是非常重要，但它在保护网络通信方面起着关键作用。

- HTTPS：HTTPS是HTTP与TLS的结合，用于安全地传输数据。HTTP本身容易受到中间人攻击的影响，而HTTPS通过SSL/TLS保护数据的安全性和完整性，防止了这种攻击。

- SSL与TLS：虽然SSL经常与TLS互换使用，但值得注意的是SSL在技术上是一个过时的术语，已被TLS取代。TLS是SSL的继任者，更安全、更强大。

- 最重要的协议：总的来说，对开发人员来说最有用的协议是HTTPS。HTTPS确保了数据的安全传输，对于保护用户隐私和数据完整性至关重要。
