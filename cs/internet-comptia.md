## 网络基础

### OSI Model

- layer1：物理层负责通过物理媒体（如电缆、光纤、无线电波等）传输原始比特流。它定义了物理设备的规格和接口，如电压、电缆类型、传输速率、信号传输方式等。
  - 协议和标准：Ethernet（以太网）物理层标准，USB，Bluetooth，IEEE 802.11（Wi-Fi）
- layer2：*链路层*负责将物理层传输的比特流组织*成帧*，并提供可靠的*节点到节点*的数据传输。它负责帧的传输控制、错误检测和纠正、流量控制等。
  - 协议和标准：Ethernet（以太网）数据链路层协议，PPP（点对点协议），HDLC（高级数据链路控制），*MAC*（媒体访问控制）地址
  - 子层sublayers：LLC（*NIC网卡*）逻辑链路控制层，MAC媒体访问控制层
- layer3：*网络层*负责在不同网络之间路由*route*和传输数据包*packets*（数据包可以跨越多个网络）。它管理网络间的路径选择、逻辑地址IP分配、网络间的转发和流量控制等。
  - 协议和标准：*IP（互联网协议），ICMP（互联网控制消息协议），ARP（地址解析协议），OSPF（开放最短路径优先），BGP（边界网关协议）*
- layer4：*传输层*提供可靠的数据传输服务，并负责*数据的分段segmentation、重组和流量控制*。它确保数据包在端到端传输中的完整性和顺序。
  - 协议和标准：*TCP（传输控制协议），UDP（用户数据报协议）*，SCTP（流控制传输协议）
- layer5：会话层负责建立、管理和终止应用程序之间的会话（连接）。它管理会话的建立和同步，并提供对话控制和数据交换。
  - 协议和标准：NetBIOS（网络基本输入输出系统），PPTP（点对点隧道协议），RPC（远程过程调用）
- layer6：表示层负责数据格式化、加密和解密、数据压缩和解压缩。它确保发送方和接收方之间的数据格式一致，使得数据在传输过程中可以被正确解析和展示。
  - 协议和标准：SSL/TLS（安全套接层/传输层安全协议），JPEG（图像压缩格式），ASCII（文本编码标准），MPEG（视频编码标准）
- layer7：*应用层*直接为应用程序提供网络服务和接口。它处理用户接口相关的事务，并负责应用程序间的通信和数据交换。
  - 协议和标准：*HTTP/HTTPS（超文本传输协议/安全超文本传输协议），FTP（文件传输协议），SMTP（简单邮件传输协议），DNS（域名系统）*

### 封装（Encapsulation）和解封装（Decapsulation）

在网络通信中，封装（Encapsulation）和解封装（Decapsulation）是关键的过程，它们描述了数据在网络协议栈中从发送到接收的转换过程。

- 封装是将数据从高层协议添加到低层协议中的过程。
- 在发送数据时，数据从应用层开始，一层层向下传递，每一层都会添加特定的协议头或尾（称为协议数据单元，PDU）。
- 最底层的数据单元最终会变成网络可以传输的帧或数据包。

- 解封装是接收数据时从低层协议到高层协议的过程。
- 数据从物理层开始，一层层向上传递，每一层都会去掉自己的协议头或尾，并将数据传递给上一层。
- 最终，高层应用程序收到去掉了所有协议头的原始数据。


数据封装和解封装过程（宛如人生）

假设我们有一个 Web 客户端向服务器发送 HTTP 请求的过程，以下是每一层的封装示例：

1. **应用层**：
   - 数据：`"GET /index.html HTTP/1.1\r\nHost: www.example.com\r\n\r\n"`
   - 无协议头。

2. **表示层**：
   - 假设表示层没有对数据进行处理。
   - 数据保持不变。

3. **会话层**：
   - 假设会话层也没有对数据进行处理。
   - 数据保持不变。

4. **传输层**：
   - 数据：应用层数据 + 传输层头（例如 TCP 头）。
   - 封装后的段（segment）：
     ```
     TCP Header + Application Data
     ```

5. **网络层**：
   - 数据：传输层段 + 网络层头（例如 IP 头）。
   - 封装后的数据包（packet）：
     ```
     IP Header + TCP Header + Application Data
     ```

6. **数据链路层**：
   - 数据：网络层数据包 + 数据链路层头和尾（例如 Ethernet 头和尾）。
   - 封装后的帧（frame）：
     ```
     Ethernet Header + IP Header + TCP Header + Application Data（payload）+ Ethernet Trailer
     ```

7. **物理层**：
   - 数据：数据链路层的帧被转换成比特流。
   - 发送比特流通过物理介质传输。

当服务器收到这个 HTTP 请求时，解封装过程如下：

1. **物理层**：
   - 接收到比特流。
   - 将比特流转换成帧，并传递给数据链路层。

2. **数据链路层**：
   - 接收帧。
   - 去掉数据链路层头和尾，得到网络层的数据包，并传递给网络层。
     ```
     IP Header + TCP Header + Application Data
     ```

3. **网络层**：
   - 接收数据包。
   - 去掉网络层头，得到传输层的段，并传递给传输层。
     ```
     TCP Header + Application Data
     ```

4. **传输层**：
   - 接收段。
   - 去掉传输层头，得到应用层数据，并传递给会话层。
     ```
     Application Data
     ```

5. **会话层**：
   - 假设会话层没有对数据进行处理。
   - 数据保持不变。

6. **表示层**：
   - 假设表示层没有对数据进行处理。
   - 数据保持不变。

7. **应用层**：
   - 接收应用数据。
   - 解析 HTTP 请求并进行响应。

- **模块化和分层设计**：封装和解封装使得每一层可以专注于特定的功能，从而实现了网络协议的模块化和分层设计。这有助于协议的开发、维护和升级。
- **互操作性**：不同厂商和系统之间可以通过标准化的封装和解封装协议进行互操作。
- **故障诊断**：分层的封装和解封装过程有助于网络故障的隔离和诊断，因为可以在特定的层次上查找问题。
- **数据安全和控制**：通过封装过程，数据可以在不同的层次上被加密、压缩和处理，从而提高了数据的安全性和传输效率。

**这个过程太有意思了，宛如一个人的完整一生。从淳朴到厚重最后再回归淳朴。返璞归真。带了很多了头衔，帽子，内容，负载了TTL生命的长度，过程中会经过各种人生旅程，但是最后到达终点的时候，只是为了回归本我，中间一路的嵌套，只是为了自我保护罢了，都很不容易呐。**

TCP的header中的*Port*指示了设备上的哪个应用。
*MTU*是payload最大传输单元。

### 网络拓扑，网络类型，网络设备

- 网络拓扑（Network Topology）是指网络中各种设备和节点的物理或逻辑布局方式。它描述了网络中的设备如何相互连接以及数据如何在这些设备之间传输。
- 物理拓扑主要是设备的物理连接方式，逻辑拓扑主要是数据在流动上的逻辑关系。
- Bus拓扑是总线型，Star拓扑是星型拓扑，Ring是环形拓扑，Mesh是网状拓扑，Tree树形拓扑，Hybrid拓扑是混合型。

**Client-Server 网络**

在客户端-服务器（Client-Server）网络中，网络结构分为两个主要角色：客户端和服务器。服务器是一个强大的中央计算机，它提供资源和服务，如文件存储、数据库、应用程序和网络连接。客户端是用户设备（如电脑、智能手机等），它们通过网络向服务器请求资源和服务。这种模式常用于企业环境和互联网应用中，比如网页浏览和电子邮件服务。服务器集中管理资源，提供高效的控制和安全性，但也可能成为单点故障的瓶颈 。

**Peer-to-Peer 网络**

在对等（Peer-to-Peer, P2P）网络中，所有节点（设备）都是平等的，既可以作为客户端，也可以作为服务器。每个节点可以直接与其他节点交换资源和服务，而无需通过中央服务器。P2P 网络通常用于*文件共享*、*分布式计算*和*区块链技术*。它们的优点包括高扩展性和容错性，因为网络没有单点故障。然而，P2P 网络在管理和安全性方面相对较弱，因为没有中央控制点 。

**LAN，PAN，CAN，WAN，MAN，WLAN，SAN**

- 局域网（Local Area Network）是连接家庭、办公室或校园内设备的小范围网络，通常支持高速数据传输
- 个人区域网（Personal Area Network）用于在个人设备之间建立短距离连接，如蓝牙耳机与智能手机之间的通信
- 校园区域网（Campus Area Network）连接多个局域网，覆盖大学校园或企业园区等较大区域，提供内部高带宽通信
- 广域网（Wide Area Network）连接广泛地理区域的多个局域网，常用于全球范围的通信，如互联网
- 城域网（Metropolitan Area Network）覆盖城市或大都市区域，用于连接多个局域网和广域网之间的通信
- 无线局域网（Wireless Local Area Network）利用无线技术（如 Wi-Fi）在小范围内连接设备，常见于家庭和办公室
- 存储区域网（Storage Area Network）是一种专门的高速网络，连接服务器和存储设备，提供集中化的数据存储和管理

- WAN**广域网**依赖于多种技术和通信介质，如光纤、卫星、电话线、无线网络等。
  - *MPLS*（多协议标签交换）：MPLS 是一种数据传输技术，用于在网络中高效地转发数据包。它通过使用短标签而不是长网络地址来引导数据包通过网络，从而加快数据传输速度并优化流量管理。总之基于标签的转发机制，依赖于物理基础设施和服务提供商的网络。
  - *SD-WAN*（软件定义广域网）：SD-WAN 是一种虚拟化的 WAN 架构，它利用软件和云技术来集中管理和优化广域网流量。SD-WAN 可以动态地选择最佳的路径来传输数据，提升网络性能和可靠性。总之基于软件定义的虚拟化网络，使用互联网和其他网络连接优化流量。
  - *VPN*（虚拟专用网）：在公共网络上创建一个安全的虚拟网络通道，保护数据传输的隐私和安全。
    - *SSL VPN（安全套接字层虚拟专用网络）*是一种通过 SSL 加密技术在公共网络上创建安全的远程访问通道，允许用户安全地连接到公司或其他私有网络。
    - *DTLS VPN（数据报传输层安全协议虚拟专用网络）*是一种利用 DTLS 协议加密 UDP 流量，提供低延迟和高效的加密通信的 VPN 技术，适用于实时应用和不可靠网络环境下的安全连接。
    - *动态多WAN VPN（Dynamic Multi-WAN Virtual Private Network, DWVPN）*是一种利用多个广域网连接实现负载均衡和故障转移的 VPN 技术，动态分配网络流量以提高连接的稳定性和带宽利用效率。
  - 卫星通信：用于连接远程或难以接入的地区，尤其在地面通信基础设施有限的地方。
  - *PrivateLink*：私有链接技术通过私有端点、标签交换、虚拟网络隔离和加密通信，实现了安全和高效的私有数据传输。
  - 远程桌面协议（Remote Desktop Protocol, *RDP*）是一种由微软开发的协议，它允许用户通过网络远程连接到另一台计算机，以图形界面方式操作该计算机的桌面和应用程序。
  - 虚拟网络计算（Virtual Network Computing, *VNC*）是一种远程显示协议，允许用户通过网络连接远程访问和控制另一台计算机的桌面界面，无论操作系统是什么。

**Demarcation Point & Smart Jack**

- Demarcation Point，简称“Demarc”或“Demarc Point”，是一个网络或电信服务提供商（ISP）的责任结束并与客户的内部网络连接的物理地点或接口。这个点标志着所有权和维护责任的分界线：在这个点之前的线路和设备由服务提供商负责，而之后的则由客户负责
- Smart Jack（智能插座）进一步增强了 Demarc Point 的功能，是一种带有内置电子组件的网络接口设备，通常安装在 Demarc Point。它不仅作为一个简单的物理连接点，还可以提供远程管理和故障诊断功能

**Hypervisor & VMs**

是一种虚拟化技术的软件或固件层，允许在单个物理计算机上运行多个虚拟机（VMs）。它的主要作用是管理和分配物理计算机的资源，如处理器、内存和存储，以便多个操作系统实例可以同时运行而互相隔离。Hypervisor通常分为两种类型：Type 1（裸机或本地）Hypervisor直接在硬件上运行，而Type 2（主机或嵌套）Hypervisor则运行在宿主操作系统上。

**Virtual switch（虚拟交换机）**

是一种软件定义网络（SDN）中的关键组件，用于在虚拟化环境中连接虚拟机（VMs）或虚拟网络功能（VNFs）。它类似于物理网络中的网络交换机，但在虚拟化环境中运行，并通过软件管理数据包的转发和网络流量的控制。

虚拟交换机允许虚拟机之间或虚拟机与物理网络之间的通信，同时提供网络隔离、流量控制、安全策略的实施等功能。它可以通过各种技术实现，如基于软件的交换机实现（如Linux Bridge）、硬件辅助虚拟交换机（如基于SR-IOV的交换机）或者专用的虚拟交换机软件（如VMware的vSwitch或Microsoft的Hyper-V虚拟交换机）。

**vNIC**

指的是虚拟网络接口卡（Virtual Network Interface Card），是在虚拟化环境中用于连接虚拟机（VM）到物理网络或虚拟网络的软件实体。每个虚拟机都可以有一个或多个vNIC，它们由虚拟化平台管理，并在虚拟机内部视为物理网络接口卡的仿真。vNIC通过虚拟交换机或虚拟网络设备与物理网络或其他虚拟机通信，允许虚拟机访问网络资源和与其他计算资源交互。

vNIC扮演了连接虚拟机与网络之间的桥梁角色，负责将虚拟机中产生的网络流量转发到正确的目的地，同时也负责接收来自网络的数据包并传输到虚拟机。

在AWS（亚马逊云计算服务）中，ENI（Elastic Network Interface，弹性网络接口）可以被视为一种vNIC（虚拟网络接口卡）。ENI允许将虚拟机（EC2实例）连接到一个或多个虚拟私有云（VPC）的子网中，并配置其网络属性，如IP地址、路由表和安全组等。每个EC2实例可以附加一个或多个ENI，每个ENI都可以有自己的MAC地址、IP地址和安全组规则，从而提供了灵活的网络配置选项。

因此，尽管ENI在AWS中具有更广泛的功能（如弹性IP绑定、多IP地址支持等），但从功能角度来看，它们可以被看作是AWS环境中虚拟机（EC2实例）的虚拟网络接口卡。

按照**交换技术**：

- 线路交换：专用通路进行数据传输，比如电话网络
- 报文交换：存储转发网络
- 分组交换：主流的**包交换**，会被分割

现在大部分是分组交换，也就是包。

**网络硬件**的意义在于，对包的格式进行转换，转换的目的是让包在OSI层之间进行通行。设备包括：中继器，集线器，网桥，交换机，路由器，网关。

- 中继器（repeater）：连接同一种网络，目的是放大信号，延长网络距离，连接的网络在逻辑上是同一个网络。工作在物理层。
- 集线器（hub）：是中继器的一种，只是他能提供更多的端口服务，他是对网络集中管理的最小单元，有很多问题，比如数据阻塞，其改进是和交换机一体。
- 网桥（bridge）：是连接LAN的设备，是局域网的扩展设备，转发LAN之间的帧，遇到本LAN网段的帧会丢弃，其他网段的则进行查询和转发。
- **交换机（switch）**：相对于hub（一次只能一个端口发数据，并且是所有端口共享网络），交换机则是多端口可以同时发送，并且每个端口独享整个带宽，提高网络的传输速率。简单的说，hub对总带宽做除法，switch则是对带宽做乘法。通过*MAC*引导流量，工作在*链路层*。
  - Switch的*access management*通过配置和管理VLAN（虚拟局域网），端口安全特性（如*端口安全*、802.1X认证），以及访问控制列表（ACL）来控制和保护网络上每个端口的访问权限和安全性。
- Layer 3 **capable switch**是一种具备*路由功能的交换机*，能够在*网络层*（Layer 3）上实现IP路由和分组转发功能，与传统的Layer 2交换机相比，可以根据IP地址进行路由决策，支持网络层的功能，如IP地址的分配、路由表的管理和IP数据包的转发，而Layer 2交换机仅支持数据链路层的MAC地址学习和转发。可以实现跨子网的通信，而Layer 2交换机只能在*同一子网内*进行通信。适合于需要更复杂网络拓扑和多个子网的场景，而Layer 2交换机适合简单的局域网内部通信。
- 路由器（router）：连接两个不同*类型*的网络的装置，分为动态和静态，大型网络一般是动态路由。网桥工作在第二层链路层，路由器工作在第三层网络层。智能，有路径选择功能。
- 网关（gateway）：连接两个完全不同*结构*的网络，是*硬件和软件的结合产品*，通过重新封装信息，以使能被另一个系统读取。同时运行在OSI模型的几个层上。
- 负载均衡（Loadbalancer）：流量分配，高可用性和弹性
- 代理服务器是一种位于客户端和目标服务器之间的中间服务器，用于转发客户端请求并获取目标服务器响应，可以提供*安全性、性能优化和访问控制，匿名，内容过滤，缓存*等功能。
- Cable modem是一种设备，用于通过有线电视网络（如电缆电视网络）提供宽带互联网接入服务给用户。
- Voice gateway是一种设备，用于在IP网络和传统电话网络之间进行转换和连接，实现VoIP电话与传统电话系统的互通。
- Media converter是一种设备，用于将不同类型的传输介质（如光纤和铜线）之间的信号进行转换和适配，以实现不同网络设备之间的互联互通。
- IDS（入侵检测系统）用于监视网络和系统活动，识别和报告潜在的恶意行为
- IPS（入侵防御系统）则能主动阻止或响应潜在的恶意行为，增强网络安全防护能力
- 防火墙是一种网络安全设备，通过监视和控制网络流量，根据预设规则过滤和阻止未经授权的数据包，以保护网络免受恶意攻击和未授权访问。
- VPN Headend是虚拟专用网络（VPN）的*入口点*，负责管理和处理连接请求，提供安全的远程访问和跨网络连接服务。

**Networking设备**是指用于构建和管理计算机网络的设备（比如上面的那些），而**Networked设备**是指已连接到网络并可以相互通信的各种计算设备和物联网设备。
- VoIP电话
- Printer打印机
- Physical Access Control Device比如安全门，安全锁
- 监控相机
- HAVC (Heating, Ventilation, and Air Conditioning) 是指供暖、通风和空调系统，用于调节和维持室内环境的温度、湿度和空气质量。
- 各种IoT设备
- SCADA（Supervisory Control and Data Acquisition）是一种用于监控和控制工业过程的系统，通过传感器和控制器收集数据，并允许操作人员通过人机界面进行实时操作和决策。

### 光电信息传输

- 电信号主要依赖于电压、电流和波形的变化来表示和传输信息，适用于电子设备和电信网络中的数据传输和处理。
- 光信号则利用光的特性，如光强、频率和相位的变化来表示信息，适用于光通信、光传感器和激光技术中的数据传输和处理。

信号能够转化为光和电主要依赖于两种技术：*光电转换和电光转换*

1. **光电转换（光信号转电信号）**：
   - **原理**：光电转换是指将光信号转换为电信号的过程。它利用光电二极管（Photodiode）或光电探测器（Photodetector）等器件，这些器件能够将接收到的光信号转换为相应的电压信号。光照射到光电二极管或探测器上产生光生载流子，从而引起电流或电压的变化，这一变化可以被检测和放大，进而提取原始的光信号信息。

   - **应用**：光电转换广泛应用于光通信、光电子传感器、医学成像和光电子设备等领域，其中光通信是最常见的应用，通过光纤传输数据时使用光电转换技术将光信号转换为电信号，然后再进行处理和解码。

2. **电光转换（电信号转光信号）**：
   - **原理**：电光转换是指将电信号转换为光信号的过程。它利用激光二极管（Laser Diode）或LED（Light Emitting Diode）等发光器件，这些器件通过电流驱动，在内部产生电子和空穴的复合，从而激发出光子（光量子）。这些光子形成的光信号在光纤或空气中传输，携带着电信号的信息。

   - **应用**：电光转换在光通信、光电显示器、激光打印机和激光雷达等领域中得到广泛应用。在光通信中，电子设备产生的电信号经过电光转换器件转换为光信号，通过光纤传输至目标地点，再通过光电转换器件将光信号转换回电信号，完成数据的传输和接收。

### 不同类型的Cables和Connectors

**Copper**

- 同轴电缆（Coaxial Cable）是一种用于传输高频信号的电缆，其结构独特，能够有效地屏蔽外界电磁干扰。它在电视信号传输和互联网接入中应用广泛。
- 双绞线（Twisted Pair Cable）是一种常见的电缆，用于传输数据和语音信号。它由成对的绝缘铜线相互扭绕而成，以减少电磁干扰和串扰。双绞线广泛应用于电话通信和局域网（LAN）中，是现代网络布线的基础。特别是在中小规模的局域网中。随着技术的进步，高级别的双绞线（如Cat 6a和Cat 7）提供了更高的带宽和更好的抗干扰能力，满足了不断增长的数据传输需求。
- 光纤（Fiber Optic Cable）是一种利用光信号传输数据的通信介质。它具有高带宽、低损耗和抗电磁干扰的特点，广泛应用于长距离和高性能的数据通信中。

**光纤连接器**

- LC 连接器：
- 用途：常用于数据中心和企业网络中的光纤连接。
- 特点：小型化、高密度，适合高速数据传输，例如单模和多模光纤系统。
- SC 连接器：
- 用途：广泛用于数据通信和电信网络中。
- 特点：方形连接器，采用推拉式插入机制，适合于单模和多模光纤。
- ST 连接器：
- 用途：常用于多模光纤系统，如局域网。
- 特点：圆形连接器，采用旋转锁定机制，比较常见于早期的网络设备和应用。
- MPO/MTP 连接器：
- 用途：用于高密度光纤连接，如数据中心的高带宽应用。
- 特点：支持多芯光纤，能够同时传输多个光信号。


**Patch panel（补丁面板）**是一种网络设备，用于在计算机网络和通信系统中管理和组织网络电缆的连接。它通常安装在机架或机柜中，并提供了一个集中的位置，用于连接局域网（LAN）中的各种设备，如计算机、打印机、路由器、交换机等，以及外部电缆，如光纤或铜缆。

**Fiber distribution panel（光纤配线面板）**是用于管理和组织光纤连接的设备，通常安装在数据中心、企业网络或其他需要大量光纤连接的地方。它与常见的铜缆补丁面板类似，但专门设计用于光纤系统。

**Punchdown block（压线块）**是一种用于电信和网络布线的设备，主要用于连接和管理铜缆（如电话线和网络电缆）。它通常用于安装在电话机房或网络设备附近，提供了一个结构化的方式来组织和连接大量的电缆。

### Ethernet标准

- 一组规范和协议，用于定义**局域网**（LAN）中数据传输的方式、速率和物理介质。它们由IEEE（Institute of Electrical and Electronics Engineers）标准化组织制定和管理，以确保不同厂商的设备和网络能够互操作并达到预期的性能水平。

**常见的Ethernet标准包括：**

1. **IEEE 802.3**
   - **描述**：IEEE 802.3是Ethernet的基础标准，定义了各种速率（如10 Mbps、100 Mbps、1 Gbps、10 Gbps等）以及不同的物理介质和数据链路层的协议。
   - **应用**：常见的应用包括Ethernet局域网和广域网（WAN）的数据传输。

2. **Fast Ethernet（IEEE 802.3u）**
   - **描述**：Fast Ethernet是一种以100 Mbps速率运行的Ethernet标准，通过使用双绞线和光纤来提供更高的传输速度。
   - **应用**：适用于需要更快速数据传输的局域网环境。

3. **Gigabit Ethernet（IEEE 802.3ab）**
   - **描述**：Gigabit Ethernet支持以1 Gbps速率运行的Ethernet标准，广泛应用于提供更高带宽需求的网络环境，如数据中心和企业网络。
   - **应用**：用于连接服务器、存储设备和网络交换机等高性能网络设备。

4. **10 Gigabit Ethernet（IEEE 802.3ae）**
   - **描述**：10 Gigabit Ethernet支持以10 Gbps速率运行的Ethernet标准，用于满足超高带宽和大数据传输需求的环境。
   - **应用**：主要用于数据中心的内部网络和广域网连接。

5. **Ethernet over Copper**
   - **描述**：通过铜缆传输Ethernet信号的技术，如Ethernet over twisted pair（双绞线Ethernet）和Ethernet over coaxial cable（同轴电缆Ethernet）等，适用于不同类型的物理介质传输。

6. **其他相关标准**
   - 包括适用于特定用途的扩展标准，如Power over Ethernet（PoE，IEEE 802.3af）、Ethernet over Powerline（通过电力线传输Ethernet，IEEE 1901）等。

### TCP/IP模型

特性：逻辑编址，路由选择，域名解析，错误检测，流量控制，以及对应用程序的支持

物理层 - 网络接口 - 网际协议 - 传输层协议 - 应用层协议

网络物理层比如以太网协议，网际层比如IP/ICMP/ARP/RARP协议，传输层比如TCP/UDP，应用层协议比如FTP/Telnet/SMTP/NFS/SNMP协议

### 网络协议

- IPv4
- IPv6
  - IPv6 Tunneling：一种在IP4和IP6之间数据传输封装转换的技术
  - IPv6 Dual Stack：向IPv6迁移的技术，在同一个设备上可以同时使用IP4和IP6的技术
  - 地址的省略写法，使用::省掉中间的0，但是只能用一次
- Subnets
  - CIDR是原本的A～E分区的更好替代
- NAT
- 虚拟IP（Virtual IP，VIP）通常指的是网络中用于标识服务或应用程序的逻辑 IP 地址，而不是实际物理设备的 IP 地址。它通常用于负载均衡、高可用性集群、容错系统等场景中。
  - 逻辑性质：虚拟IP并不关联于任何特定的物理设备，而是通过网络设备或软件来管理和分配。
  - 服务重定向：VIP可被重定向到群集中的不同节点或服务器，以实现负载均衡和故障恢复。
  - 高可用性：在节点或服务器发生故障时，虚拟IP可以自动转移到可用节点，确保服务的持续性。

- 端口Ports关联的是程序和应用
- **端口号**用于标识特定的应用程序或服务，数字范围各有不同用途：
  - **0-1023**：**知名端口（Well-Known Ports）**，分配给标准化的服务和协议（如 HTTP 的端口 80，HTTPS 的端口 443，FTP 的端口 21），这些端口由 IANA（Internet Assigned Numbers Authority）管理并分配，用于标准化服务，确保服务和客户端能够在预期的端口上进行通信
  - **1024-49151**：**注册端口（Registered Ports）**，用于特定服务和应用程序，但不受官方标准化（如数据库服务的端口 3306，远程桌面的端口 3389）注册端口用于需要在特定范围内保持一致的应用程序，但这些端口不是全球标准化的，因此不如知名端口那么固定
  - **49152-65535**：**动态或私有端口（Dynamic/Private Ports）**，通常用于客户端的临时连接，也称为临时端口（如 NAT 设备分配的端口），动态端口通常由操作系统自动分配，用于短期的客户端连接。它们在应用程序启动时动态分配，结束后释放

- 为什么需要端口：
**多路复用（Multiplexing）**是一种通信技术，它通过在同一条物理信道上同时传输多个信号或数据流，提升网络资源的利用效率，并允许多个设备共享相同的传输介质。
- 概念：将多个信号合并到一个信道上，以优化资源使用。
- 应用：广泛用于电话系统、计算机网络和广播电视等领域。
- 类型：包括时分复用（TDM）、频分复用（FDM）、波分复用（WDM）、以及统计复用等。
- 时分复用（TDM）：在不同时间段传输不同的信号，如在电话交换系统中每个用户占用不同的时间片段。
- 频分复用（FDM）：在不同的频率上传输不同的信号，如广播电视台在不同的频率上发送多个频道。


- **ICMP（Internet Control Message Protocol，互联网控制消息协议）**用于在网络设备之间传输控制消息和错误报告的网络层协议，常用于诊断和管理网络连接，如通过“ping”命令检测网络的可达性。
- **IGMP（Internet Group Management Protocol，互联网组管理协议）**用于管理和控制*多播*组成员资格的网络协议，允许路由器和主机设备加入或离开特定的多播组，从而优化多播流量在网络中的传输。
- **TCP（传输控制协议）**是一种面向连接的协议，提供可靠的、有序的数据传输，通过三次握手建立连接并确保数据包按顺序且无错误地传输；**UDP（用户数据报协议）**是一种无连接的协议，不提供可靠性保证，适用于需要快速、低延迟传输的应用，如视频流和在线游戏。
- **IPSec（Internet Protocol Security，互联网协议安全）**是一种用于在*IP 网络*上实现安全通信的协议套件，通过加密和验证机制来确保数据包的机密性、完整性和真实性，常用于构建虚拟专用网络（VPN）和安全的网络通信。
  - **AH（认证头协议）**是 IPSec 的一个组件，提供数据包的完整性、真实性和防重放保护，但不加密数据
  - **ESP（封装安全载荷）**是 IPSec 的另一个组件，提供数据加密以及数据包的完整性和真实性，确保数据的机密性和安全性


- **FTP**：21端口，有两种主要的操作模式：主动模式（Active Mode）和被动模式（Passive Mode）。主动被动的主语是server
  - 主动模式，客户端请求，服务器发起连接，但是这可能会被防火墙ban
  - 被动模式，客户端建立连接，服务器被动接受，这符合大多数防火墙的出站规则
- **TFTP**：69端口（Trivial File Transfer Protocol，简易文件传输协议）是一种非常简单的文件传输协议
  - 无认证，无目录操作比如ls和cd，基于UDP
- **SFTP**：22端口（SSH File Transfer Protocol 或 Secure File Transfer Protocol，安全文件传输协议）是用于通过安全通道传输文件的网络协议
  - 基于SSH，TCP，有认证和加密
- **Telnet**：23端口，是一种用于在互联网上进行文本交互的早期网络协议，通常用于远程登录和管理设备，但由于缺乏加密，不适合传输敏感数据。被SSH替代。
- **SSH**：22端口（Secure Shell，安全外壳协议）是一种用于在不安全的网络上安全地远程登录和管理设备的网络协议。它提供了强大的加密和认证机制，以保护通信内容的机密性、完整性和真实性。

以下是一些常用的 SSH 命令示例：

1. **远程登录**：
   ```bash
   ssh user@remote_host
   ```
   - 使用指定的用户名 `user` 登录到远程主机 `remote_host`。

2. **使用密钥登录**：
   ```bash
   ssh -i /path/to/private_key user@remote_host
   ```
   - 使用指定的私钥文件 `/path/to/private_key` 来登录到远程主机。

3. **远程执行命令**：
   ```bash
   ssh user@remote_host 'ls -l /path/to/directory'
   ```
   - 在远程主机上执行 `ls -l /path/to/directory` 命令。

4. **文件传输（SCP）**：
   ```bash
   scp /local/file user@remote_host:/remote/directory/
   ```
   - 将本地文件 `/local/file` 复制到远程主机的 `/remote/directory/` 目录。

5. **创建端口转发**：
   ```bash
   ssh -L 8080:localhost:80 user@remote_host
   ```
   - 将本地主机的8080端口转发到远程主机上的80端口。

- **SMTP**（Simple Mail Transfer Protocol，简单邮件传输协议）是一种用于发送电子邮件的网络协议，通常使用 TCP 的*25*号端口进行通信，但也可使用587号端口进行加密传输和认证。
- **POP3**（Post Office Protocol 3，邮局协议版本3）是一种用于从邮件服务器*下载*电子邮件的协议，通常使用 TCP 的110号端口进行通信，但使用加密连接时则使用*995*号端口。
- **IMAP4**（Internet Message Access Protocol Version 4，互联网邮件访问协议版本4）是一种用于从邮件服务器访问和管理电子邮件的协议，通常使用 TCP 的143号端口进行通信，使用加密连接时则使用*993*号端口。
- **DNS**：UDP端口53
- **DHCP**：UDP端口67（server）/68（client），在IPv4和IPv6中有各自的版本
- **SNMP**（Simple Network Management Protocol，简单网络管理协议）是一种用于监控和管理网络设备的协议，常通过 UDP 的161号端口发送管理请求和通过162号端口接收设备的通知。
- *HTTP*（80）+ SSL/TLS = *HTTPS*（443）
- **SMB**（Server Message Block，服务器消息块协议）是一种用于共享文件、打印机和其他网络资源的协议，通常在 TCP 的445号端口上运行，并广泛用于 Windows 网络环境。
- **LDAP**（Lightweight Directory Access Protocol，轻量目录访问协议）是一种用于访问和管理*分布式目录服务*的信息协议，通常在 TCP 和 UDP 的389号端口上运行，使用加密连接时则使用636号端口。
- **NTP**（Network Time Protocol，网络时间协议）是一种用于在计算机网络中同步时钟的协议，通常使用 UDP 的123号端口进行通信，以确保各设备的系统时间保持一致。
- *Syslog* 是一种用于在网络设备和计算机系统之间传输日志消息的协议，通常通过 UDP 的514号端口进行通信，用于集中化的日志收集和分析。
- *Mysql*：port3306/*MicrosoftSQL*：port1433
- **RDP**（Remote Desktop Protocol，远程桌面协议）是一种用于在网络上远程访问和控制计算机桌面界面的协议，通常在 TCP 和 UDP 的3389号端口上运行，广泛应用于远程技术支持和管理。
- **SIP**（Session Initiation Protocol，会话发起协议）是一种用于在 IP 网络上建立、管理和终止多媒体通信会话（如语音和视频通话）的信令协议，通常使用 TCP 或 UDP 的5060号端口进行通信。
- **DHCP（动态主机配置协议）**：一种网络协议，用于自动分配IP地址和其他网络配置给客户端设备，使其能够在网络上通信。
  - **DORA（发现、提供、请求、确认）**：是DHCP协议中的四个步骤，表示客户端设备与DHCP服务器之间的通信过程：
    1. **D**iscovery（发现）：客户端广播一个请求，寻找可用的DHCP服务器。
    2. **O**ffer（提供）：DHCP服务器响应客户端，提供一个可用的IP地址和配置信息。
    3. **R**equest（请求）：客户端选择一个服务器的提议，并请求确认其提供的IP地址。
    4. **A**cknowledgment（确认）：服务器确认并分配IP地址，客户端完成配置并加入网络。
  - **Lease（租约）**：在DHCP中，租约是服务器临时分配给客户端设备使用的IP地址和其他网络配置的有效期限，期限到期后需要续租或重新获取。
  - **DHCP Relay（DHCP中继）**：是一种网络设备或功能，用于将客户端的DHCP请求转发到位于不同子网或远程网络上的DHCP服务器，从而实现跨网络的IP地址分配。
  - **IP Reservation（IP地址保留）**：在DHCP中，IP地址保留是指为特定设备（通常基于其MAC地址）永久分配一个固定的IP地址，即使该设备断开连接并重新加入网络时，仍能获得相同的IP地址。
  - **MAC Reservation（MAC地址保留）**：一种网络配置方法，将设备的唯一MAC地址与特定的IP地址关联，使得该设备在连接网络时总是获得相同的IP地址，通常用于DHCP服务器中。MAC Reservation（MAC地址保留） 实际上是 IP Reservation（IP地址保留） 的一种具体实现方法。它通过将设备的唯一 MAC地址 与一个固定的 IP地址 绑定，使得该设备每次连接网络时都能获得相同的 IP 地址。这种方法特别适用于需要稳定 IP 地址的设备，如服务器、打印机或其他关键网络设备。
- **NTP（网络时间协议）**：是一种用于同步计算机时钟的协议，通过分层次的服务器与参考时间源进行时间对比和调整，确保网络中所有设备的时间一致性。

- **Spanning Tree Protocol (STP)**: Spanning Tree Protocol (STP) 是一种网络协议，旨在防止网络环路，通过自动关闭冗余链路来维持以太网拓扑的无环性，确保网络的稳定性和高效性。

- **Carrier Sense Multiple Access (CSMA)**: Carrier Sense Multiple Access (CSMA) 是一种用于控制网络设备访问共享通信媒介的方法，设备在传输前会检测媒介是否空闲，以减少碰撞和提高传输效率。

- **ARP（地址解析协议）**是一种网络协议，用于将IP地址解析为对应的物理MAC地址，以便在本地网络中实现数据包的正确传输。

- **NDP（Neighbor Discovery Protocol）**是一种在*IPv6网络中*使用的协议，用于执行邻居发现、路由器发现、地址自动配置和重定向等功能，以确保网络设备间的高效通信。

- **SNMP（Simple Network Management Protocol）**是一种用于监控和管理网络设备（如路由器、交换机和服务器）性能和状态的协议，通过简单的请求-响应机制收集和交换信息。

### DNS

- **DNS Resolver（DNS解析器）**：是负责接收客户端的域名查询请求，并递归地查找正确的IP地址的*系统组件或服务*。
  - 递归解析器：接收客户端请求并全程查询到最终的IP地址，返回给客户端。
- **DNS Server（DNS服务器）**：是存储和管理域名与IP地址对应关系的*服务器*，直接响应DNS查询请求或为DNS解析器提供查询结果。
  - 权威DNS服务器：存储和提供特定域名的最终IP地址信息，负责直接回答对应域名的查询。

- **Internal DNS（内部DNS）**：用于企业内部网络的DNS服务，解析公司内部的域名和IP地址，使得内部资源可被安全且快速访问。
- **External DNS（外部DNS）**：用于公共互联网的DNS服务，解析公开的域名和IP地址，使得内部和外部用户能够访问互联网资源和网站。

- *Records*：
  - **A记录**：将域名解析为IPv4地址。
  - **AAAA记录**：将域名解析为IPv6地址。
  - **CNAME记录**：将一个域名别名映射到另一个域名。
  - **MX记录**：指定负责接收电子邮件的邮件服务器。
  - **TXT记录**：存储任意的文本信息，常用于验证和配置。
  - **NS记录**：指定负责解析域名的权威DNS服务器。
  - **SRV记录**：定义特定服务的主机和端口信息。
  - **PTR记录**：用于反向DNS查找，将IP地址映射回对应的域名。

- **Zone Transfer（区域传输）**：一种DNS操作，用于将一个DNS服务器中的区域数据（包括所有记录）复制到另一个DNS服务器上，通常用于同步主从DNS服务器的数据。
- **主从服务器（Primary and Secondary DNS Servers）**：在DNS系统中，主服务器（Primary）是负责管理和存储原始DNS数据的主要服务器，而从服务器（Secondary）通过区传输（Zone Transfer）从主服务器复制数据，以提供*冗余和负载均衡*。

- **DNS Caching（DNS缓存）**：是一种机制，用于在本地或中间服务器上暂时存储已解析的域名和IP地址，以加速后续的DNS查询并减少对权威DNS服务器的请求。

### 数据中心和企业网络架构

- **数据中心**：是用于集中存储、管理和分发计算资源与数据的设施，提供关键的IT服务和基础设施。
- **Three Tier（三层架构）**：是一种数据中心网络设计，分为接入层（Access）、汇聚层（Aggregation/Distribution）和核心层（Core），每层分别负责不同的网络功能和流量管理。

- **SDN（软件定义网络）**：是一种网络架构，通过将网络的数据平面（负责数据传输）、控制平面（决策逻辑）和应用层（提供网络服务）分离，以实现网络管理和配置的集中化、自动化控制和灵活性。
- **数据平面（Data Plane）**：负责实际的数据包转发和处理。
- **控制平面（Control Plane）**：负责制定网络策略、管理网络状态和路由选择。
- **SDN的各个层（Layers）**：包括应用层（Applications）、控制层（Control Layer）和基础设施层（Infrastructure Layer），用于提供特定网络服务、管理网络和支持实际数据传输。
- SDN的出现主要是为了*解决传统网络架构中硬件设备静态配置、管理复杂性高和难以适应快速变化的需求*的问题。通过将网络控制逻辑集中化和软件化，SDN使得网络管理更加灵活、可编程和自动化，以支持现代应用和服务的需求。
- **Spine and Leaf**：是一种数据中心网络拓扑结构，通过分层级联的Leaf交换机与高容量的Spine交换机组合，提供高性能、低延迟和可扩展性的互联解决方案。SDN可以运用在Spine and Leaf这样的物理网络拓扑中，通过集中化的控制平面和灵活的数据平面，实现对Spine and Leaf结构的智能管理、动态配置和优化，以提升整体网络的性能和管理效率。
   1. **最短路径和并行传输**：每个Leaf交换机通过多条路径连接到每个Spine交换机，使得数据传输可以同时进行和选择最短路径，从而提供更高的带宽和低延迟。
   2. **扩展性**：Spine and Leaf结构中的每个Leaf交换机都可以直接连接到每个Spine交换机，因此在需要扩展时，只需增加Leaf或Spine节点，而不需要重构现有结构，使得网络扩展更加简单和可管理。
   3. **容错和高可用性**：多路径连接和冗余设计提高了整体网络的容错能力，即使部分节点或链路发生故障，依然能够保持数据的传输和服务的可用性。
   4. **简化的管理和配置**：相比传统的Three Tier结构，Spine and Leaf的扁平化设计和简化的路径选择使得管理和配置任务更加直观和高效，减少了配置错误的可能性，并支持快速的部署和故障排除。
   5. **灵活性和适应性**：Spine and Leaf结构适应了现代数据中心和云计算环境中快速变化的应用需求和流量模式，支持灵活的服务交付和网络调整，使得网络能够更加快速地响应业务需求变化。

- *Traffic flows* 指的是网络中数据包的流动路径和方向
  - **东西通信（East-West Traffic）**：指数据在同一数据中心内部的横向流动，通常发生在服务器、虚拟机或应用之间的通信。
  - **南北通信（North-South Traffic）**：指数据在数据中心与外部网络之间的纵向流动，通常包括客户端到服务器或数据中心到互联网的通信。北向是离开数据中心，南向是进入数据中心

- **Branch Office**：指一个企业的物理分支机构，通常位于不同的地理位置，但仍然通过网络连接到总部进行资源共享和通信。
- **On-Premise**：指企业内部部署和管理的IT基础设施和应用，位于*公司自有或租用的设施*中，完全由企业控制。
- **Colocation**：指企业将其服务器和网络设备*托管在第三方提供的数据中心*中，享受共享的基础设施和环境控制，但设备仍由企业自己管理。

- **Storage Area Network (SAN)**：是一种专门用于连接存储设备（如磁盘阵列和存储服务器）与服务器的高速网络，提供高性能、可靠性和可扩展性的数据存储解决方案。

### 云

- **公有云（Public Cloud）**：由第三方提供商运营，面向公众开放，用户通过互联网按需访问和使用共享的计算资源和服务。
- **私有云（Private Cloud）**：专门为单个组织设计和使用，由该组织或其代理管理，提供专有的计算资源和更高的控制和安全性。
- **混合云（Hybrid Cloud）**：结合了公有云和私有云的特性，允许数据和应用在两者之间移动，优化资源利用和灵活性。
- **社区云（Community Cloud）**：由一组有共同需求和关注点的组织共享和使用，通常由这些组织或第三方共同管理，提供共享的计算资源。

- IaaS：基础设施为服务，如EC2，ComputerEngine等
- PaaS：平台为服务，如AppEngine等可以直接构建应用的平台
- SaaS：软件即为服务，如GoogleWorkspace，Salesforce等
- DaaS：桌面即为服务，比如AmazonWorkspaces
- IaC：基础设施即为代码，版本控制，基础设施设置，降低手动错误风险，Ansible，Terraform，CloudFormation

- 本地连接云的方式：VPN（Site2Site），Private Direct Connections（AWSDX）

- 云优点：可扩展性，多租户，低成本，资源利用效率高，高弹性

### 路由

路由在计算机网络中是指选择数据包传输路径的过程。它是网络通信的核心，通过不同的方式将数据从源地址发送到目标地址。以下是关于路由的各个重要方面的详细解释。

**路由表（Routing Table）** 是路由器用来决定数据包转发路径的数据库。每个网络设备都会维护一个路由表，包含网络路径的信息。路由表的基本组成部分包括：

- **目的网络（Destination Network）**：目标网络的IP地址。
- **子网掩码（Subnet Mask）**：用于确定目标网络的网络部分和主机部分。
- **下一跳（Next Hop）**：数据包应该转发到的下一个设备的IP地址。
- **接口（Interface）**：用于发送数据包的网络接口。
- **度量值（Metric）**：路径的开销值，用于选择最佳路径；度量值越低，路径越优先。

以下是一个简单的路由表示例：

```
| Destination     | Subnet Mask   | Next Hop       | Interface | Metric |
|-----------------|---------------|----------------|-----------|--------|
| 192.168.1.0     | 255.255.255.0 | 192.168.1.1    | eth0      | 1      |
| 10.0.0.0        | 255.0.0.0     | 10.0.0.1       | eth1      | 2      |
| 0.0.0.0         | 0.0.0.0       | 192.168.1.254  | eth0      | 0      |
```

**路由类型**

路由类型可以根据其配置和学习方式分为以下几种：

- **静态路由（Static Routing）**：
  - 由网络管理员手动配置和管理。
  - 适用于小型、稳定的网络环境。
  - 优点：简单、无动态学习过程。
  - 缺点：维护复杂，不能自动适应网络变化。
  - 示例：在Linux系统上添加静态路由`route add -net 10.0.0.0 netmask 255.0.0.0 gw 192.168.1.1`

- **动态路由（Dynamic Routing）**：
  - 使用路由协议自动学习和更新路由信息。
  - 适用于大型、动态变化的网络。
  - 优点：自动适应网络变化，减少手动配置。
  - 缺点：复杂性增加，可能引入网络开销。

- **默认路由（Default Routing）**：
  - 用于将未知目的地的数据包转发到特定的下一跳。
  - 通常配置为指向互联网网关或上级路由器。
  - 示例：配置默认路由`route add default gw 192.168.1.254`

**路由协议（Routing Protocols）** 用于在网络设备之间传递路由信息，帮助设备动态学习和更新路由表。主要的路由协议分为内部网关协议（IGP）和外部网关协议（EGP）。

#### 内部网关协议（IGP）

- **距离矢量协议（Distance Vector Protocols）**：
  - 基于跳数（hop count）来选择路径。
  - 例子：RIP（Routing Information Protocol）。

  ```
  // RIP 示例配置
  // router rip
  // network 192.168.1.0
  ```

- **链路状态协议（Link State Protocols）**：
  - 基于网络拓扑来计算路径。
  - 例子：OSPF（Open Shortest Path First），IS-IS（Intermediate System to Intermediate System）。

  ```
  // OSPF 示例配置
  // router ospf
  // network 192.168.1.0 0.0.0.255 area 0
  ```

- **混合协议（Hybrid Protocols）**：
  - 结合了距离矢量和链路状态的特点。
  - 例子：EIGRP（Enhanced Interior Gateway Routing Protocol）。

  ```
  // EIGRP 示例配置
  // router eigrp 1
  // network 192.168.1.0 0.0.0.255
  ```

#### 外部网关协议（EGP）

- **BGP（Border Gateway Protocol）**：
  - 用于不同自治系统（AS）之间的路由。
  - 适用于互联网规模的路由。

  ```
  // BGP 示例配置
  // router bgp 65001
  // neighbor 10.1.1.1 remote-as 65002
  ```

#### 路由器的基本工作原理

- **数据包转发（Packet Forwarding）**：
  - 路由器根据路由表决定数据包的转发路径。
  - 使用下一跳信息将数据包发送到目的地。

- **路由选择（Route Selection）**：
  - 当有多个路径可用时，路由器使用度量值选择最佳路径。
  - 基于路由协议计算的度量值和策略。

#### 路由器的高级功能

- **访问控制列表（ACL）**：
  - 用于控制进出网络的数据流量，基于IP地址、协议等条件。

  ```
  // ACL 示例配置
  // access-list 100 permit ip 192.168.1.0 0.0.0.255 any
  ```

- **NAT（网络地址转换）**：
  - 用于将私有IP地址转换为公共IP地址，常用于互联网连接。

  ```
  // NAT 示例配置
  // ip nat inside source list 1 interface Serial0/0 overload
  ```

- **QoS（服务质量）**：
  - 用于管理不同类型流量的优先级，以确保关键应用的性能。

  ```
  // QoS 示例配置
  // class-map match-all VOIP
  // match ip dscp 46
  ```

- **VPN（虚拟专用网）**：
  - 用于在公网上创建安全的通信隧道，保护数据传输。

#### 路由器的硬件和软件

- **硬件**：
  - CPU：处理路由和数据包转发。
  - 内存：存储路由表、配置和临时数据。
  - 接口：连接不同的网络段，如以太网、光纤、WAN接口。

- **软件**：
  - 操作系统：如Cisco IOS、Juniper JUNOS。
  - 路由协议栈：实现各种路由协议。
  - 管理工具：提供命令行接口（CLI）、图形界面（GUI）等。

#### 路由的安全性

- **路由协议安全**：
  - 使用认证来保护路由协议，如RIP、OSPF的MD5认证。

  ```
  // OSPF 认证示例配置
  // router ospf 1
  // area 0 authentication message-digest
  ```

- **防火墙和ACL**：
  - 通过配置ACL来限制不必要的流量，保护网络安全。

- **VPN加密**：
  - 使用VPN加密保护远程通信的安全性。

### VLAN

**VLAN（Virtual Local Area Network，虚拟局域网）** 是一种通过逻辑划分网络的方法，使得一个物理网络分割成多个虚拟网络。每个VLAN像一个独立的局域网，能提升网络性能、增强安全性，并简化网络管理。

1. **VLAN ID**：
   - VLAN的唯一标识符，范围从1到4094。
   - 通过VLAN ID，可以在同一物理网络上创建多个逻辑隔离的网络。

2. **VLAN Tagging**：
   - 在数据帧中插入VLAN标记，识别数据帧属于哪个VLAN。
   - 使用IEEE 802.1Q标准在帧头插入4字节的VLAN标签。

3. **Trunk Port和Access Port**：
   - **Access Port**：连接到终端设备，只能传输单一VLAN的数据流量。
   - **Trunk Port**：连接到其他交换机或路由器，能够传输多个VLAN的数据流量，使用VLAN标签区分。

4. **Native VLAN**：
   - 在Trunk链路上，未标记VLAN标签的数据帧被默认分配到Native VLAN。
   - 通常用于传输管理流量或默认流量。

#### VLAN的类型

1. **静态VLAN（Port-based VLAN）**：
   - 基于端口分配VLAN，即通过交换机端口进行划分。
   - 配置简单，适用于固定的设备和用户。

   ```shell
   // 配置交换机端口为Access Port并分配到VLAN 10
   Switch(config)# interface FastEthernet 0/1
   Switch(config-if)# switchport mode access
   Switch(config-if)# switchport access vlan 10
   ```

2. **动态VLAN（Dynamic VLAN）**：
   - 基于设备属性（如MAC地址、用户身份）动态分配VLAN。
   - 需要使用VLAN管理工具（如VMPS - VLAN Membership Policy Server）。

   ```shell
   // 配置动态VLAN（假设使用VMPS）
   Switch(config)# vlan database
   Switch(vlan)# vmps server 192.168.1.100
   ```

3. **协议VLAN（Protocol-based VLAN）**：
   - 根据数据帧的协议类型划分VLAN（如IP、IPX）。
   - 常用于多协议环境，允许不同协议的数据流量分开处理。

4. **基于MAC地址的VLAN（MAC-based VLAN）**：
   - 根据设备的MAC地址划分VLAN。
   - 提供更细粒度的控制，适用于需要对特定设备进行管理的网络环境。

### Port

**Port tagging** 是一种*网络技术*，用于在同一条物理网络链路上，通过在数据帧中添加标签（通常是VLAN标签），来区分和管理不同的虚拟局域网（VLAN），从而使得多种网络流量可以共存而不会相互干扰。

**Port aggregation** 是一种将多个网络端口组合成一个逻辑链路，以增加带宽、提高冗余性和实现负载均衡的*网络技术*。

**Duplex** 是一种*通信模式*，定义了数据传输的方向性，可以是单向（半双工）或双向同时（全双工），影响网络设备之间的数据交换效率。

**Port mirroring** 是一种网络技术，用于将一个或多个端口上的数据流量复制到另一个端口，以便进行实时监控或分析，而不会影响原始流量的传输。

**Jumbo Frames** 是指大于标准MTU（通常为1500字节）的以太网帧，通常用于优化网络性能，特别是在高带宽和低延迟的网络环境中，可以减少处理开销和提高传输效率。

### Wifi

想象一个音乐会（频段），音乐会的整个场地内有多个舞台（信道）。每个舞台在同一时间段内演奏不同的音乐。音乐会场地是频段，所有的演奏舞台都是这个频段的一部分，但每个舞台是独立的演奏空间，即信道。多个信道可以在同一频段内同时工作，但它们必须在不同的频率范围内，以避免干扰。

- **频段（Frequency Band）**: 是较宽的频率范围，包含多个信道。
- **信道（Channel）**: 是频段内的具体频率子集，用于无线通信设备之间的实际数据传输。
- 在 Wi-Fi 中，我们选择特定的信道来传输数据，而这些信道属于特定的频段。每个频段有不同的物理特性，适合不同的使用场景。

**SSID**是无线网络的唯一标识符，用于帮助设备识别和连接到特定的 Wi-Fi 网络。当你打开设备的 Wi-Fi 功能时，设备会扫描周围的无线网络，并显示这些网络的 SSID，用户可以根据 SSID 选择要连接的网络。

无线加密技术比较：

| 加密协议 | 简介  | 安全性 | 适用场景 |
|-------|------|------|--------|
| WEP   | 早期的加密标准，易被破解 | 弱  | 不推荐 |
| WPA   | WEP的改进版，动态密钥 | 中  | 过渡期设备 |
| WPA2  | 目前主流标准，采用AES加密 | 强  | 现代无线网络 |
| WPA3  | 最新标准，更强加密和安全性 | 最强 | 未来网络 |

- **家庭Wi-Fi网络**：通常使用WPA2-Personal加密。
- **企业网络**：常使用WPA2-Enterprise或WPA3-Enterprise，提供更强的安全性和用户管理。
- **公共Wi-Fi热点**：未来将逐步采用WPA3增强安全性。

### Network Operations

- SNMP：简单网络管理协议
- network device log: traffic logs, audit logs, syslog
- 物理环境：数据中心的sensor，温度控制，电力控制等
- Plan and Procedures:
  - change management
  - incident response plan
  - disaster recovery plan
  - system life cycle
  - SOP: standard operating procedure
- Hardening and Security Policies
- SLA
- Load Balancing, Multipathing and Network Interface Cards (NIC) Teaming
- Redundant Hardware and Clusters，Power distribution units + generators(储存电)（基础设施维护）

### Network Security
- CIA 数据的机密性，完整性，可用性（data）
- Least Privilege（people access）
- detailed defense mechanism 针对各个 layer 的防卫（network）


## 自顶向下


**协议**（protocol）定义了在两个或多个通信实体之间交换的*报文的格式和顺序*，以及报文发送和/或接收一条报文或其他事件所采取的*动作*。

- 感悟：网络主要在讲各种*协议*，我觉得这是因为，网络的目的本身就是为了信息交换，另外网络又分为很多层和多个主体，所以他们之间如何进行信息交换就非常重要。同时当然还有网络*设备*，因为你信息交换离不开各种设备。

网络中的报文大家都叫**分组**。是靠**路由器**和**链路层的交换机**进行传输的。

分组是一段一段的。所以交换机都是先*存储*后*传输*。存储是因为分组还没收完呢要先存起来。

网络传输中的信息传播的本质是**数字信号**通过有线或无线介质进行传输，使用二进制系统（0和1），数据被编码成电信号或光信号，以便在网络中传输。并通过各种协议和标准来管理和控制数据包的发送、接收和重组。整个过程依赖于一系列技术和机制来确保信息能够准确、高效地从源到达目标。

**分组交换**优于电路交换，分组交换按需分配链路使用，电路交换不考虑需求，而是预先分配了传输链路的使用。

**ISP（Internet Service Provider）**是指互联网服务提供商：全球这么大的网络的构建是很难的，所以使用者，也就是接入者为客户customer，ISP则为提供商，也就是帮你入网的人。

**传输时延**是路由器推出分组所需要的时间，它是分组长度和链路传输速率的函数，而与两台路由器之间的距离无关。另一方面，**传播时延**是一个比特从一台路由器传播到另一台路由器所需要的时间，它是两台路由器之间距离的函数，而与分组长度或链路传输速率无关。
